const baseDomain="https://sainternet.xyz",pwaName="sainternet",pwaVersion="_v11",cacheName=`${pwaName}_v11`,appURLS=[`${baseDomain}/sainternet.webmanifest`,],cssURLS=[`${baseDomain}/resources/fontawesome-free-6.3.0-web/css/brands-stripped.min.css`,`${baseDomain}/resources/fontawesome-free-6.3.0-web/css/fontawesome-stripped.min.css`,`${baseDomain}/resources/fontawesome-free-6.3.0-web/css/solid.min.css`,`${baseDomain}/resources/stylesheets/button_home.min.css`,`${baseDomain}/resources/stylesheets/datetime.min.css`,`${baseDomain}/resources/stylesheets/img.min.css`,`${baseDomain}/resources/stylesheets/material.amber-red.min.css`,`${baseDomain}/resources/stylesheets/material.blue-red.min.css`,`${baseDomain}/resources/stylesheets/material.brown-red.min.css`,`${baseDomain}/resources/stylesheets/material.cyan-red.min.css`,`${baseDomain}/resources/stylesheets/material.deep_purple-red.min.css`,`${baseDomain}/resources/stylesheets/material.green-red.min.css`,`${baseDomain}/resources/stylesheets/material.indigo-red.min.css`,`${baseDomain}/resources/stylesheets/material.light_blue-red.min.css`,`${baseDomain}/resources/stylesheets/material.light_green-red.min.css`,`${baseDomain}/resources/stylesheets/material.orange-red.min.css`,`${baseDomain}/resources/stylesheets/material.pink-red.min.css`,`${baseDomain}/resources/stylesheets/material.red-blue.min.css`,`${baseDomain}/resources/stylesheets/material.teal-red.min.css`,`${baseDomain}/resources/stylesheets/material.yellow-red.min.css`,`${baseDomain}/resources/stylesheets/pre.min.css`,`${baseDomain}/resources/stylesheets/ribbons.min.css`,`${baseDomain}/resources/stylesheets/sainternet.min.css`,`${baseDomain}/resources/stylesheets/table.min.css`,],fontURLS=[`${baseDomain}/resources/fontawesome-free-6.3.0-web/webfonts/fa-brands-400.woff2`,`${baseDomain}/resources/fontawesome-free-6.3.0-web/webfonts/fa-solid-900.woff2`,],htmlURLS=[`${baseDomain}/`,`${baseDomain}/265.html`,`${baseDomain}/404.html`,`${baseDomain}/connecttosainternet.html`,`${baseDomain}/debug.html`,`${baseDomain}/filtereddns.html`,`${baseDomain}/frequentlyaskedquestions.html`,`${baseDomain}/index.html`,`${baseDomain}/newsandupdates.html`,`${baseDomain}/pokedexoverdns.html`,`${baseDomain}/portsandprotocols.html`,`${baseDomain}/projects.html`,`${baseDomain}/reportaproblem.html`,`${baseDomain}/technologies.html`,`${baseDomain}/testsainternet.html`,],iconURLS=[`${baseDomain}/favicon.ico`,`${baseDomain}/resources/icons/android-chrome-192x192.png`,`${baseDomain}/resources/icons/android-chrome-265-192x192.png`,`${baseDomain}/resources/icons/android-chrome-404-192x192.png`,`${baseDomain}/resources/icons/favicon-265-32x32.png`,`${baseDomain}/resources/icons/favicon-265.ico`,`${baseDomain}/resources/icons/favicon-32x32.png`,`${baseDomain}/resources/icons/favicon-404-32x32.png`,`${baseDomain}/resources/icons/favicon-404.ico`,],imageURLS=[`${baseDomain}/resources/images/luxio-shiny.webp`,`${baseDomain}/resources/images/luxio.webp`,`${baseDomain}/resources/images/terminal.webp`,`${baseDomain}/resources/images/wurmple-shiny.webp`,`${baseDomain}/resources/images/wurmple.webp`,],jsURLS=[`${baseDomain}/resources/javascript/debug.min.js`,`${baseDomain}/resources/javascript/load_fonts.min.js`,`${baseDomain}/resources/javascript/material.min.js`,`${baseDomain}/resources/javascript/random_phrase.min.js`,`${baseDomain}/resources/javascript/tag_manager.min.js`,`${baseDomain}/resources/javascript/toggle_drawer.min.js`,`${baseDomain}/sainternet.min.js`,`${baseDomain}/serviceworker.min.js`,],allURLS=[...appURLS,...cssURLS,...fontURLS,...htmlURLS,...iconURLS,...imageURLS,...jsURLS,],debugChannel=new BroadcastChannel("sainternet-debug");let debugValue=!1;function handlePeriodicUpdate(){caches.open(cacheName).then(function(e){return logDebugMessage(`[Service Worker] Updating cache: ${cacheName}`),e.addAll(allURLS)})}function logDebugMessage(e,s="log"){"true"===debugValue&&console[s](e)}debugChannel.onmessage=e=>{logDebugMessage(`[Service Worker] Broadcast Channel API message event: ${debugChannel}`),debugValue=e.data.debugValue},setInterval(handlePeriodicUpdate,864e5),self.addEventListener("install",function(e){logDebugMessage("[Service Worker] Event: install");try{self.skipWaiting(),e.waitUntil(caches.open(cacheName).then(function(e){return logDebugMessage(`[Service Worker] Installing cache: ${cacheName}`),e.addAll(allURLS)}))}catch(s){logDebugMessage(`[Service Worker] Error during install event: ${s}`,"error")}}),self.addEventListener("activate",function(e){logDebugMessage("[Service Worker] Event: activate");try{self.clients&&clients.claim&&(logDebugMessage("[Service Worker] Claiming available clients"),clients.claim()),e.waitUntil(caches.keys().then(function(e){let s=e.filter(function(e){return e.indexOf(pwaName)});return logDebugMessage(`[Service Worker] Whitelisting current cache: ${cacheName}`),s.push(cacheName),Promise.all(e.map(function(a,r){if(-1===s.indexOf(a))return logDebugMessage(`[Service Worker] Deleting orphaned cache: ${e[r]}`),caches.delete(e[r])}))}))}catch(s){logDebugMessage(`[Service Worker] Error during activate event: ${s}`,"error")}}),self.addEventListener("fetch",function(e){try{console.log(`[Service Worker] Fetch request: ${e.request.url}`),e.respondWith(caches.match(e.request).then(function(s){return s?(logDebugMessage(`[Service Worker] Responding from cache: ${e.request.url}`),s):(logDebugMessage(`[Service Worker] Resource not cached, fetching: ${e.request.url}`),fetch(e.request))}))}catch(s){logDebugMessage(`[Service Worker] Error during fetch event: ${s}`,"error")}});
